# Disable WirePlumber suspension for USB headsets
#
# Problem: WirePlumber automatically suspends audio devices after ~5 seconds of inactivity
# to save power. However, when switching ALSA card profiles (music vs call mode), this
# suspension behavior causes audio routing issues:
#
# 1. Profile switch triggers device suspension
# 2. Suspended sinks can't become default even with correct priority
# 3. Audio streams remain routed to suspended devices (no sound)
# 4. Manual intervention (like opening pavucontrol) needed to wake devices
#
# Solution: Disable suspension for USB headsets so they stay active during profile changes
# This ensures audio routing works immediately after profile switches without requiring
# stream moves or other workarounds.

monitor.alsa.rules = [
  {
    # Disable suspension for any Avantree device (covers all sinks/sources)
    matches = [
      {
        device.name = "~alsa_card.usb-Avantree.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0
      }
    }
  }
  {
    # Disable suspension for any Jabra device (covers all sinks/sources)
    matches = [
      {
        device.name = "~alsa_card.usb-.*Jabra.*"
      }
    ]
    actions = {
      update-props = {
        session.suspend-timeout-seconds = 0
      }
    }
  }
]