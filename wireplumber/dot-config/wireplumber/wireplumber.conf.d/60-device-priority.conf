# Audio Device Priority Configuration
# Primary: Jabra Link 380 (highest priority when available)
# Fallback: Avantree C81 (medium priority)
# Last resort: Built-in audio (lowest priority ~2000)

monitor.alsa.rules = [
  # Jabra output (sink) - HIGHEST priority
  {
    matches = [
      {
        node.name = "~alsa_output.usb-0b0e_Jabra_Link_380.*analog-stereo.*"
      }
    ]
    actions = {
      update-props = {
        priority.driver = 3000
        priority.session = 3000
        node.description = "Jabra Link 380 Audio Output (Primary)"
      }
    }
  }

  # Jabra input (source) - HIGHEST priority
  {
    matches = [
      {
        node.name = "~alsa_input.usb-0b0e_Jabra_Link_380.*mono-fallback.*"
      }
    ]
    actions = {
      update-props = {
        priority.driver = 3000
        priority.session = 3000
        node.description = "Jabra Link 380 Microphone (Primary)"
      }
    }
  }

  # Avantree output (sink) - FALLBACK priority
  {
    matches = [
      {
        node.name = "~alsa_output.usb-Avantree_Avantree_C81_PC.*analog-stereo.*"
      }
    ]
    actions = {
      update-props = {
        priority.driver = 2500
        priority.session = 2500
        node.description = "Avantree C81(PC) Audio Output (Fallback)"
      }
    }
  }

  # Avantree input (source) - FALLBACK priority
  {
    matches = [
      {
        node.name = "~alsa_input.usb-Avantree_Avantree_C81_PC.*mono-fallback.*"
      }
    ]
    actions = {
      update-props = {
        priority.driver = 2500
        priority.session = 2500
        node.description = "Avantree C81(PC) Microphone (Fallback)"
      }
    }
  }
]
