#!/bin/bash

case "${1:-toggle}" in
    status)
        if makoctl mode | grep -q "do-not-disturb"; then
            echo '{"text":"󰂛","alt":"dnd","tooltip":"Do Not Disturb: ON","class":"dnd"}'
        else
            echo '{"text":"󰂜","alt":"default","tooltip":"Do Not Disturb: OFF","class":"default"}'
        fi
        ;;
    toggle)
        if makoctl mode | grep -q "do-not-disturb"; then
            makoctl mode -r do-not-disturb
            notify-send "Notifications ON"
        else
            notify-send "Notifications OFF"
            sleep 0.5  # Give notification time to display
            makoctl mode -a do-not-disturb
        fi
        pkill -RTMIN+11 waybar
        ;;
esac
